# ==============================================
# JOB HUNT ASSISTANT â€“ ENVIRONMENT TEMPLATE
# ==============================================
# HOW TO USE THIS FILE
# 1. Duplicate as `.env.local` for local dev.
# 2. Duplicate again as `.env.build` for CI/CD or Cloud Run deployments.
# 3. Fill in every placeholder (look for ALL_CAPS hints).
# 4. Keep `.env.local` / `.env.build` out of git (already ignored).
# ----------------------------------------------

# ----------------------------------------------
# 1. APP CONFIGURATION
# ----------------------------------------------
# Base URLs used across redirects, email links, and metadata.
APP_URL=http://localhost:3000
NEXT_PUBLIC_APP_URL=http://localhost:3000

# Server runtime knobs
NODE_ENV=development              # `development`, `production`, or `test`.
PORT=3000                         # Local dev server port.
BUILD_STANDALONE=false            # Set true when exporting a standalone output.

# Logging verbosity
LOG_LEVEL=info                    # Server log minimum (debug|info|warn|error).
LOG_REQUEST_DEBUG=true            # Emits request scope traces; disable in prod if noisy.
NEXT_PUBLIC_LOG_LEVEL=info        # Browser-side log level.

# Repository + contact info shown in the UI and support emails.
NEXT_PUBLIC_REPO_URL=https://github.com/ebenezer-isaac/job-hunt.email
CONTACT_EMAIL=your.email@gmail.com
NEXT_PUBLIC_CONTACT_EMAIL=your.email@gmail.com

# Optional admin bypass email (receives higher quota + allowlist skip).
ADMIN_EMAIL=

# ----------------------------------------------
# 2. AUTHENTICATION & INTERNAL SECURITY
# ----------------------------------------------
# Shared secret for middleware <-> internal APIs (e.g., /api/log, allowlist checks).
# Generate via: node -e "console.log(require('crypto').randomBytes(48).toString('base64'))"
ACCESS_CONTROL_INTERNAL_TOKEN=generate-a-64-character-secret

# Deterministic Server Action encryption key (required for multi-instance or self-hosted deployments).
# Generate via: node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
NEXT_SERVER_ACTIONS_ENCRYPTION_KEY=

# Signed cookie configuration (comma-separated list allows rotation).
FIREBASE_AUTH_COOKIE_SIGNATURE_KEYS=base64-secret-one,base64-secret-two
FIREBASE_AUTH_COOKIE_NAME=cv-customiser-auth
FIREBASE_AUTH_COOKIE_MAX_AGE_SECONDS=14400   # 4 hours
FIREBASE_AUTH_COOKIE_SAME_SITE=lax
FIREBASE_AUTH_COOKIE_SECURE=false            # Flip to true in production HTTPS
FIREBASE_AUTH_COOKIE_DOMAIN=

# ----------------------------------------------
# 3. FIREBASE (ADMIN + CLIENT)
# ----------------------------------------------
# Admin SDK (server-only). Values come from the service-account JSON.
FIREBASE_PROJECT_ID=your-project-id
FIREBASE_CLIENT_EMAIL=firebase-adminsdk@example.iam.gserviceaccount.com
# Keep literal \n escapes inside the quoted key below when copying from JSON.
FIREBASE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\\nYOUR_PRIVATE_KEY\\n-----END PRIVATE KEY-----\\n"
FIREBASE_API_KEY=your-server-sdk-api-key
FIREBASE_STORAGE_BUCKET=your-project-id.appspot.com
FIREBASE_AUTH_DEBUG=false

# Client SDK (safe to expose, mirrors Firebase Console "Web App" block).
NEXT_PUBLIC_FIREBASE_API_KEY=your-web-api-key
NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN=your-project.firebaseapp.com
NEXT_PUBLIC_FIREBASE_PROJECT_ID=your-project-id

# ----------------------------------------------
# 4. AI PROVIDERS & GENERATION LIMITS
# ----------------------------------------------
# Google Gemini (required). Grab from https://aistudio.google.com/
GEMINI_API_KEY=

# Apollo.io (optional). Needed only for cold-email enrichment.
APOLLO_API_KEY=

# Model routing (safe defaults provided).
GEMINI_PRO_MODEL=gemini-3-pro-preview
GEMINI_PRO_FALLBACK_MODEL=gemini-2.5-pro
GEMINI_FLASH_MODEL=gemini-2.5-flash
GEMINI_EMBED_MODEL=text-embedding-004

# Retry/backoff + document constraints.
AI_MAX_RETRIES=5
AI_INITIAL_RETRY_DELAY=10000      # milliseconds
TARGET_PAGE_COUNT=2               # Enforced via pdf-parse after LaTeX renders.
MAX_CONTENT_LENGTH=50000          # Per-field string cap before persistence/logging.
SCRAPING_TIMEOUT=30000            # ms before job description fetch aborts.

# ----------------------------------------------
# 5. LLAMAINDEX / RAG SETTINGS
# ----------------------------------------------
LLAMAINDEX_ENABLE_PERSISTENCE=true
LLAMAINDEX_PERSIST_DIR=.llamaindex-cache
LLAMAINDEX_CACHE_TTL_MS=300000
LLAMAINDEX_CACHE_MAX_ENTRIES=128
LLAMAINDEX_TRACING_ENABLED=false

# ----------------------------------------------
# 6. DOCUMENT / LATEX SERVICE
# ----------------------------------------------
USER_NAME=ebenezer-isaac            # Used in sample prompts + smoke tests.
PDFLATEX_COMMAND=pdflatex           # Override if pdflatex lives elsewhere.
SMOKE_TEST_ALLOWED_EMAILS=          # CSV allowlist for /api/smoke-latex (leave blank to disable).

# ----------------------------------------------
# 7. PUBLIC ENV FLAGS
# ----------------------------------------------
NEXT_PUBLIC_APP_ENV=development     # development|preview|production (UI banner only).

# ----------------------------------------------
# 8. OPTIONAL OVERRIDES / QUICK TOGGLES
# ----------------------------------------------
# Uncomment as needed:
# BUILD_STANDALONE=true
# FIREBASE_AUTH_COOKIE_DOMAIN=.yourdomain.com
# SMOKE_TEST_ALLOWED_EMAILS=tester@example.com,qa@example.com
